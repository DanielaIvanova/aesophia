{erl_opts, [debug_info]}.

{deps, [ {aebytecode, {git, "https://github.com/aeternity/aebytecode.git",
                            {ref,"720510a"}}}
       , {getopt, "1.0.1"}
       ]}.


{profiles, [ {eqc, [{erl_opts, [{parse_transform, eqc_cover}]},
                    {deps, [{eqc_ci, "1.0.0"}]},
                    {extra_src_dirs, ["quickcheck"]}    %% May not be called eqc!
                   ]}
           ]}.

{escript_incl_apps, [aesophia, aebytecode, getopt]}.
{escript_main_app, aesophia}.
{escript_name, aesophia}.
{escript_emu_args, "%%! +sbtu +A0\n"}.
{provider_hooks, [{post, [{compile, escriptize}]}]}.

{post_hooks, [{"(linux|darwin|solaris|freebsd|netbsd|openbsd)",
               escriptize,
               "cp \"$REBAR_BUILD_DIR/bin/aesophia\" ./aesophia"},
              {"win32",
               escriptize,
               "robocopy \"%REBAR_BUILD_DIR%/bin/\" ./ aesophia* "
               "/njs /njh /nfl /ndl & exit /b 0"} % silence things
             ]}.

{dialyzer, [
            {warnings, [unknown]},
            {plt_apps, all_deps},
            {base_plt_apps, [erts, kernel, stdlib, crypto, mnesia]}
           ]}.
